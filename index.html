<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Travel Companion</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .lucide { width: 1em; height: 1em; display: inline-block; vertical-align: middle; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons (simplified)
        const Icon = ({ name, className = "h-4 w-4" }) => (
            <svg className={`lucide ${className}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                {name === 'home' && <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/>}
                {name === 'map' && <polygon points="1,6 1,22 8,18 16,22 23,18 23,2 16,6 8,2"/>}
                {name === 'dollar-sign' && <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>}
                {name === 'users' && <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>}
                {name === 'languages' && <path d="M5 8l6 6"/><path d="M4 14l6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="M22 22l-5-10-5 10"/><path d="M14 18h6"/>}
                {name === 'globe' && <circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>}
                {name === 'train' && <rect x="1" y="3" width="15" height="13" rx="2"/><line x1="16" y1="8" x2="16" y2="16"/><line x1="1" y1="8" x2="15" y2="8"/><circle cx="5.5" cy="13.5" r="0.5"/><circle cx="10.5" cy="13.5" r="0.5"/>}
                {name === 'bus' && <path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2v-.2H22V9.5c0-.3-.1-.6-.2-.9L20.6 5H3.4L2.2 8.6c-.1.3-.2.6-.2.9V14c0 .4.1.8.2 1.2.3 1.1.8 2.8.8 2.8h3"/><circle cx="7" cy="18" r="2"/><circle cx="17" cy="18" r="2"/>}
                {name === 'calendar-clock' && <path d="M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3.5"/><path d="M16 2v4"/><path d="M8 2v4"/><path d="M3 10h5"/><circle cx="16" cy="16" r="6"/><path d="M16 14v2l1 1"/>}
                {/* Add more icons as needed */}
            </svg>
        );

        // UI Components
        const Button = ({ children, onClick, variant = "default", size = "default", className = "", type = "button", ...props }) => {
            const baseClasses = "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background";
            const variants = {
                default: "bg-blue-600 text-white hover:bg-blue-700",
                outline: "border border-gray-300 bg-transparent hover:bg-gray-100",
                ghost: "hover:bg-gray-100"
            };
            const sizes = {
                default: "h-10 py-2 px-4",
                sm: "h-9 px-3 rounded-md"
            };
            
            return (
                <button 
                    className={`${baseClasses} ${variants[variant]} ${sizes[size]} ${className}`}
                    onClick={onClick}
                    type={type}
                    {...props}
                >
                    {children}
                </button>
            );
        };

        const Card = ({ children, className = "" }) => (
            <div className={`rounded-lg border bg-white shadow-sm ${className}`}>
                {children}
            </div>
        );

        const CardHeader = ({ children }) => (
            <div className="flex flex-col space-y-1.5 p-6 pb-4">{children}</div>
        );

        const CardTitle = ({ children, className = "" }) => (
            <h3 className={`text-lg font-semibold leading-none tracking-tight ${className}`}>{children}</h3>
        );

        const CardDescription = ({ children }) => (
            <p className="text-sm text-gray-600">{children}</p>
        );

        const CardContent = ({ children }) => (
            <div className="p-6 pt-0">{children}</div>
        );

        const Input = ({ className = "", ...props }) => (
            <input className={`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ${className}`} {...props} />
        );

        const Label = ({ children, htmlFor, className = "" }) => (
            <label htmlFor={htmlFor} className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`}>
                {children}
            </label>
        );

        const Textarea = ({ className = "", ...props }) => (
            <textarea className={`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 ${className}`} {...props} />
        );

        const Select = ({ children, value, onValueChange }) => {
            const [isOpen, setIsOpen] = useState(false);
            const [selectedValue, setSelectedValue] = useState(value || '');

            const handleSelect = (newValue) => {
                setSelectedValue(newValue);
                onValueChange?.(newValue);
                setIsOpen(false);
            };

            return (
                <div className="relative">
                    <button
                        type="button"
                        className="flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        onClick={() => setIsOpen(!isOpen)}
                    >
                        <span>{selectedValue || 'Select...'}</span>
                        <Icon name="chevron-down" className="h-4 w-4" />
                    </button>
                    {isOpen && (
                        <div className="absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg">
                            {React.Children.map(children, (child) => 
                                React.cloneElement(child, { onSelect: handleSelect })
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const SelectItem = ({ children, value, onSelect }) => (
            <div 
                className="px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer"
                onClick={() => onSelect(value)}
            >
                {children}
            </div>
        );

        const Badge = ({ children, variant = "default" }) => {
            const variants = {
                default: "bg-blue-100 text-blue-800",
                outline: "border border-gray-300 bg-transparent",
                secondary: "bg-gray-100 text-gray-800"
            };
            return (
                <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${variants[variant]}`}>
                    {children}
                </span>
            );
        };

        function SmartTravelCompanion() {
            const [activeTab, setActiveTab] = useState('itinerary');
            const [itineraries, setItineraries] = useState([]);
            const [expenses, setExpenses] = useState([]);
            const [connections, setConnections] = useState([]);
            const [phrases, setPhrases] = useState([]);
            const [budget, setBudget] = useState(0);
            const [baseCurrency, setBaseCurrency] = useState('INR');

            const [newItinerary, setNewItinerary] = useState({
                destination: '',
                startDate: '',
                endDate: '',
                activities: '',
                travelMode: 'train'
            });

            const [newExpense, setNewExpense] = useState({
                amount: 0,
                currency: 'INR',
                category: 'food',
                description: '',
                date: new Date().toISOString().split('T')[0],
                paymentMethod: 'upi'
            });

            const currencyRates = {
                USD: 83.5,
                EUR: 89.2,
                GBP: 105.4,
                INR: 1,
                AED: 22.7,
                SGD: 61.8
            };

            const formatCurrency = (amount, currency) => {
                return new Intl.NumberFormat('en-IN', {
                    style: 'currency',
                    currency: currency,
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                }).format(amount);
            };

            const convertCurrency = (amount, from, to) => {
                return amount * (currencyRates[to] || 1) / (currencyRates[from] || 1);
            };

            const handleItinerarySubmit = (e) => {
                e.preventDefault();
                const itineraryToAdd = {
                    ...newItinerary,
                    id: Date.now().toString(),
                    status: 'planned'
                };
                setItineraries([...itineraries, itineraryToAdd]);
                setNewItinerary({
                    destination: '',
                    startDate: '',
                    endDate: '',
                    activities: '',
                    travelMode: 'train'
                });
            };

            const handleExpenseSubmit = (e) => {
                e.preventDefault();
                setExpenses([...expenses, {
                    ...newExpense,
                    id: Date.now().toString(),
                    convertedAmount: convertCurrency(newExpense.amount, newExpense.currency, baseCurrency)
                }]);
                setNewExpense({
                    amount: 0,
                    currency: 'INR',
                    category: 'food',
                    description: '',
                    date: new Date().toISOString().split('T')[0],
                    paymentMethod: 'upi'
                });
            };

            const totalExpenses = expenses.reduce((sum, expense) => sum + expense.convertedAmount, 0);
            const remainingBudget = budget - totalExpenses;

            useEffect(() => {
                // Load sample data
                setPhrases([
                    {
                        id: '1',
                        english: 'Hello',
                        local: 'नमस्ते',
                        pronunciation: 'na-mas-tay',
                        category: 'greetings'
                    },
                    {
                        id: '2',
                        english: 'How much does this cost?',
                        local: 'यह कितने का है?',
                        pronunciation: 'yah kit-nay ka hai?',
                        category: 'food'
                    }
                ]);

                setConnections([
                    {
                        id: '1',
                        name: 'Rajesh Kumar',
                        location: 'Delhi',
                        contact: '+91 98765 43210',
                        type: 'guide',
                        notes: 'Speaks English and Hindi'
                    }
                ]);
            }, []);

            return (
                <div className="min-h-screen bg-gray-50 p-4">
                    <Card className="max-w-6xl mx-auto">
                        <CardHeader>
                            <CardTitle className="text-2xl flex items-center gap-2">
                                <Icon name="globe" className="h-6 w-6" />
                                Smart Travel Companion
                            </CardTitle>
                            <CardDescription>Your all-in-one intelligent travel assistant</CardDescription>
                            
                            <div className="flex gap-2 mt-4 overflow-x-auto pb-2">
                                <Button 
                                    variant={activeTab === 'itinerary' ? 'default' : 'outline'} 
                                    onClick={() => setActiveTab('itinerary')}
                                    className="flex items-center gap-2"
                                >
                                    <Icon name="home" />
                                    Itinerary
                                </Button>
                                <Button 
                                    variant={activeTab === 'budget' ? 'default' : 'outline'} 
                                    onClick={() => setActiveTab('budget')}
                                    className="flex items-center gap-2"
                                >
                                    <Icon name="dollar-sign" />
                                    Smart Budget
                                </Button>
                                <Button 
                                    variant={activeTab === 'connections' ? 'default' : 'outline'} 
                                    onClick={() => setActiveTab('connections')}
                                    className="flex items-center gap-2"
                                >
                                    <Icon name="users" />
                                    Local Connections
                                </Button>
                                <Button 
                                    variant={activeTab === 'language' ? 'default' : 'outline'} 
                                    onClick={() => setActiveTab('language')}
                                    className="flex items-center gap-2"
                                >
                                    <Icon name="languages" />
                                    Language Helper
                                </Button>
                            </div>
                        </CardHeader>

                        <CardContent>
                            {activeTab === 'itinerary' && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold">Travel Plans</h2>
                                    
                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Add New Itinerary</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            <form onSubmit={handleItinerarySubmit} className="space-y-4">
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    <div className="space-y-2">
                                                        <Label htmlFor="destination">Destination</Label>
                                                        <Input
                                                            id="destination"
                                                            value={newItinerary.destination}
                                                            onChange={(e) => setNewItinerary({...newItinerary, destination: e.target.value})}
                                                            required
                                                        />
                                                    </div>
                                                    <div className="space-y-2">
                                                        <Label htmlFor="startDate">Start Date</Label>
                                                        <Input
                                                            id="startDate"
                                                            type="date"
                                                            value={newItinerary.startDate}
                                                            onChange={(e) => setNewItinerary({...newItinerary, startDate: e.target.value})}
                                                            required
                                                        />
                                                    </div>
                                                    <div className="space-y-2">
                                                        <Label htmlFor="endDate">End Date</Label>
                                                        <Input
                                                            id="endDate"
                                                            type="date"
                                                            value={newItinerary.endDate}
                                                            onChange={(e) => setNewItinerary({...newItinerary, endDate: e.target.value})}
                                                            required
                                                        />
                                                    </div>
                                                    <div className="space-y-2">
                                                        <Label>Travel Mode</Label>
                                                        <Select
                                                            value={newItinerary.travelMode}
                                                            onValueChange={(value) => setNewItinerary({...newItinerary, travelMode: value})}
                                                        >
                                                            <SelectItem value="train">Train</SelectItem>
                                                            <SelectItem value="bus">Bus</SelectItem>
                                                            <SelectItem value="flight">Flight</SelectItem>
                                                            <SelectItem value="self-drive">Self Drive</SelectItem>
                                                        </Select>
                                                    </div>
                                                </div>
                                                <div className="space-y-2">
                                                    <Label htmlFor="activities">Activities</Label>
                                                    <Textarea
                                                        id="activities"
                                                        value={newItinerary.activities}
                                                        onChange={(e) => setNewItinerary({...newItinerary, activities: e.target.value})}
                                                        rows={3}
                                                        placeholder="List your planned activities..."
                                                    />
                                                </div>
                                                <Button type="submit">Add Itinerary</Button>
                                            </form>
                                        </CardContent>
                                    </Card>

                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Your Itineraries</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            {itineraries.length === 0 ? (
                                                <p className="text-gray-500">No itineraries added yet.</p>
                                            ) : (
                                                <div className="space-y-4">
                                                    {itineraries.map((itinerary) => (
                                                        <Card key={itinerary.id}>
                                                            <CardHeader>
                                                                <CardTitle>{itinerary.destination}</CardTitle>
                                                                <CardDescription>
                                                                    {new Date(itinerary.startDate).toLocaleDateString()} to {new Date(itinerary.endDate).toLocaleDateString()} • {itinerary.travelMode}
                                                                </CardDescription>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <p className="whitespace-pre-line">{itinerary.activities}</p>
                                                            </CardContent>
                                                        </Card>
                                                    ))}
                                                </div>
                                            )}
                                        </CardContent>
                                    </Card>
                                </div>
                            )}

                            {activeTab === 'budget' && (
                                <div className="space-y-6">
                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Budget Overview</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                                <div className="p-4 bg-blue-50 rounded-lg">
                                                    <h3 className="font-semibold text-blue-800">Total Budget</h3>
                                                    <p className="text-2xl font-bold">{formatCurrency(budget, baseCurrency)}</p>
                                                    <Input
                                                        type="number"
                                                        placeholder="Set budget"
                                                        value={budget || ''}
                                                        onChange={(e) => setBudget(Number(e.target.value))}
                                                        className="mt-2"
                                                    />
                                                </div>
                                                <div className="p-4 bg-red-50 rounded-lg">
                                                    <h3 className="font-semibold text-red-800">Total Expenses</h3>
                                                    <p className="text-2xl font-bold">{formatCurrency(totalExpenses, baseCurrency)}</p>
                                                </div>
                                                <div className={`p-4 rounded-lg ${remainingBudget >= 0 ? 'bg-green-50' : 'bg-yellow-50'}`}>
                                                    <h3 className={`font-semibold ${remainingBudget >= 0 ? 'text-green-800' : 'text-yellow-800'}`}>
                                                        Remaining Budget
                                                    </h3>
                                                    <p className="text-2xl font-bold">{formatCurrency(remainingBudget, baseCurrency)}</p>
                                                </div>
                                            </div>

                                            <Card>
                                                <CardHeader>
                                                    <CardTitle>Add New Expense</CardTitle>
                                                </CardHeader>
                                                <CardContent>
                                                    <form onSubmit={handleExpenseSubmit} className="space-y-4">
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                            <div className="space-y-2">
                                                                <Label htmlFor="amount">Amount</Label>
                                                                <Input
                                                                    id="amount"
                                                                    type="number"
                                                                    value={newExpense.amount || ''}
                                                                    onChange={(e) => setNewExpense({...newExpense, amount: Number(e.target.value)})}
                                                                    min="0"
                                                                    step="10"
                                                                    required
                                                                />
                                                            </div>
                                                            <div className="space-y-2">
                                                                <Label htmlFor="category">Category</Label>
                                                                <Select
                                                                    value={newExpense.category}
                                                                    onValueChange={(value) => setNewExpense({...newExpense, category: value})}
                                                                >
                                                                    <SelectItem value="food">Food</SelectItem>
                                                                    <SelectItem value="transport">Transport</SelectItem>
                                                                    <SelectItem value="accommodation">Accommodation</SelectItem>
                                                                    <SelectItem value="shopping">Shopping</SelectItem>
                                                                    <SelectItem value="sightseeing">Sightseeing</SelectItem>
                                                                    <SelectItem value="other">Other</SelectItem>
                                                                </Select>
                                                            </div>
                                                            <div className="space-y-2">
                                                                <Label htmlFor="description">Description</Label>
                                                                <Input
                                                                    id="description"
                                                                    value={newExpense.description}
                                                                    onChange={(e) => setNewExpense({...newExpense, description: e.target.value})}
                                                                />
                                                            </div>
                                                            <div className="space-y-2">
                                                                <Label htmlFor="date">Date</Label>
                                                                <Input
                                                                    id="date"
                                                                    type="date"
                                                                    value={newExpense.date}
                                                                    onChange={(e) => setNewExpense({...newExpense, date: e.target.value})}
                                                                    required
                                                                />
                                                            </div>
                                                        </div>
                                                        <Button type="submit">Add Expense</Button>
                                                    </form>
                                                </CardContent>
                                            </Card>
                                        </CardContent>
                                    </Card>

                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Expense History</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            {expenses.length === 0 ? (
                                                <p className="text-gray-500">No expenses recorded yet.</p>
                                            ) : (
                                                <div className="space-y-4">
                                                    {expenses.map((expense) => (
                                                        <Card key={expense.id}>
                                                            <CardHeader>
                                                                <CardTitle>{formatCurrency(expense.convertedAmount, baseCurrency)}</CardTitle>
                                                                <CardDescription>
                                                                    {expense.category} • {expense.date} • {expense.paymentMethod}
                                                                </CardDescription>
                                                            </CardHeader>
                                                            {expense.description && (
                                                                <CardContent>
                                                                    <p>{expense.description}</p>
                                                                </CardContent>
                                                            )}
                                                        </Card>
                                                    ))}
                                                </div>
                                            )}
                                        </CardContent>
                                    </Card>
                                </div>
                            )}

                            {activeTab === 'connections' && (
                                <div className="space-y-6">
                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Your Connections</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            {connections.length === 0 ? (
                                                <p className="text-gray-500">No connections added yet.</p>
                                            ) : (
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                    {connections.map((connection) => (
                                                        <Card key={connection.id}>
                                                            <CardHeader>
                                                                <div className="flex justify-between items-start">
                                                                    <div>
                                                                        <CardTitle>{connection.name}</CardTitle>
                                                                        <CardDescription className="capitalize">
                                                                            {connection.type} • {connection.location}
                                                                        </CardDescription>
                                                                    </div>
                                                                    <Badge variant="outline">{connection.type}</Badge>
                                                                </div>
                                                            </CardHeader>
                                                            <CardContent>
                                                                <div className="space-y-2">
                                                                    <div>
                                                                        <p className="font-medium">Contact:</p>
                                                                        <p>{connection.contact}</p>
                                                                    </div>
                                                                    {connection.notes && (
                                                                        <div>
                                                                            <p className="font-medium">Notes:</p>
                                                                            <p>{connection.notes}</p>
                                                                        </div>
                                                                    )}
                                                                </div>
                                                            </CardContent>
                                                        </Card>
                                                    ))}
                                                </div>
                                            )}
                                        </CardContent>
                                    </Card>
                                </div>
                            )}

                            {activeTab === 'language' && (
                                <div className="space-y-6">
                                    <Card>
                                        <CardHeader>
                                            <CardTitle>Your Phrasebook</CardTitle>
                                        </CardHeader>
                                        <CardContent>
                                            {phrases.length === 0 ? (
                                                <p className="text-gray-500">No phrases added yet.</p>
                                            ) : (
                                                <div className="space-y-4">
                                                    {['greetings', 'directions', 'food', 'emergency'].map((category) => {
                                                        const categoryPhrases = phrases.filter(p => p.category === category);
                                                        if (categoryPhrases.length === 0) return null;
                                                        
                                                        return (
                                                            <div key={category}>
                                                                <h3 className="font-semibold capitalize mb-2">{category}</h3>
                                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                                    {categoryPhrases.map((phrase) => (
                                                                        <Card key={phrase.id}>
                                                                            <CardHeader>
                                                                                <CardTitle>{phrase.english}</CardTitle>
                                                                            </CardHeader>
                                                                            <CardContent>
