<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Travel Companion</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            min-height: 100vh;
            padding: 1rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .header-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header-title h1 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #111827;
        }
        
        .header-subtitle {
            color: #6b7280;
        }
        
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .tab-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .tab-button.active {
            background-color: #2563eb;
            color: white;
        }
        
        .tab-button:not(.active) {
            background-color: #f3f4f6;
            color: #374151;
        }
        
        .tab-button:not(.active):hover {
            background-color: #e5e7eb;
        }
        
        .content {
            padding: 1.5rem;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-section-header {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            font-weight: 600;
        }
        
        .form-section-content {
            padding: 1rem;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .form-grid.md-2 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .form-input, .form-select, .form-textarea {
            padding: 0.5rem 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background-color: #2563eb;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1d4ed8;
        }
        
        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background-color: #e5e7eb;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            padding: 1rem;
            border-radius: 0.5rem;
        }
        
        .stat-card.blue {
            background-color: #eff6ff;
        }
        
        .stat-card.red {
            background-color: #fef2f2;
        }
        
        .stat-card.green {
            background-color: #f0fdf4;
        }
        
        .stat-card.yellow {
            background-color: #fffbeb;
        }
        
        .stat-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .item-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .item-card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .item-card.rescheduled {
            border-color: #fbbf24;
            background-color: #fffbeb;
        }
        
        .item-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }
        
        .item-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .item-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background-color: #fbbf24;
            color: #92400e;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 0.5rem;
        }
        
        .currency-card {
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            text-align: center;
        }
        
        .currency-code {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .currency-rate {
            font-size: 0.875rem;
            font-weight: bold;
        }
        
        .map-placeholder {
            background-color: #f3f4f6;
            height: 16rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .alert.success {
            background-color: #f0fdf4;
            color: #166534;
        }
        
        .alert.warning {
            background-color: #fffbeb;
            color: #92400e;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-wrap: wrap;
            }
            
            .form-grid.md-2 {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-title">
                <i data-lucide="globe" style="color: #2563eb;"></i>
                <h1>Smart Travel Companion</h1>
            </div>
            <p class="header-subtitle">Your all-in-one intelligent travel assistant</p>
            
            <div class="tabs">
                <button class="tab-button active" data-tab="itinerary">
                    <i data-lucide="home"></i>
                    Itinerary
                </button>
                <button class="tab-button" data-tab="navigation">
                    <i data-lucide="map"></i>
                    Navigation
                </button>
                <button class="tab-button" data-tab="budget">
                    <i data-lucide="dollar-sign"></i>
                    Smart Budget
                </button>
                <button class="tab-button" data-tab="connections">
                    <i data-lucide="users"></i>
                    Local Connections
                </button>
                <button class="tab-button" data-tab="language">
                    <i data-lucide="languages"></i>
                    Language Helper
                </button>
            </div>
        </div>

        <div class="content">
            <!-- Itinerary Tab -->
            <div id="itinerary" class="tab-content active">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="font-size: 1.25rem; font-weight: bold;">Travel Plans</h2>
                    <div class="checkbox-group">
                        <input type="checkbox" id="auto-reschedule" checked>
                        <label for="auto-reschedule" style="font-size: 0.875rem;">Auto-Reschedule Conflicts</label>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">Add New Itinerary</div>
                    <div class="form-section-content">
                        <form id="itinerary-form">
                            <div class="form-grid md-2">
                                <div class="form-group">
                                    <label class="form-label">Destination</label>
                                    <input type="text" class="form-input" name="destination" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Travel Mode</label>
                                    <div class="radio-group">
                                        <div class="radio-item">
                                            <input type="radio" name="travelMode" value="train" id="train" checked>
                                            <label for="train"><i data-lucide="train"></i> Train</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" name="travelMode" value="bus" id="bus">
                                            <label for="bus"><i data-lucide="bus"></i> Bus</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" name="travelMode" value="flight" id="flight">
                                            <label for="flight"><i data-lucide="plane"></i> Flight</label>
                                        </div>
                                        <div class="radio-item">
                                            <input type="radio" name="travelMode" value="self-drive" id="self-drive">
                                            <label for="self-drive"><i data-lucide="car"></i> Self Drive</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Start Date</label>
                                    <input type="date" class="form-input" name="startDate" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">End Date</label>
                                    <input type="date" class="form-input" name="endDate" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Activities</label>
                                <textarea class="form-textarea" name="activities" placeholder="List your planned activities..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Add Itinerary</button>
                        </form>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">Your Itineraries</div>
                    <div class="form-section-content">
                        <div id="itinerary-list" class="item-list">
                            <p style="color: #6b7280;">No itineraries added yet.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Tab -->
            <div id="navigation" class="tab-content">
                <div class="form-section">
                    <div class="form-section-header">Navigation & Maps</div>
                    <div class="form-section-content">
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                            <input type="text" class="form-input" placeholder="Enter destination..." style="flex: 1;" id="destination-input">
                            <button class="btn btn-primary" onclick="getCurrentLocation()">Get Current Location</button>
                        </div>
                        <div id="location-display" class="alert success hidden">
                            Current Location: <span id="coordinates"></span>
                        </div>
                        <div class="map-placeholder">
                            <p>Map integration would go here</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Budget Tab -->
            <div id="budget" class="tab-content">
                <div class="form-section">
                    <div class="form-section-header">Budget Overview</div>
                    <div class="form-section-content">
                        <div class="stats-grid">
                            <div class="stat-card blue">
                                <div class="stat-title">Total Budget</div>
                                <div class="stat-value" id="total-budget">₹50,000</div>
                                <input type="number" class="form-input" value="50000" id="budget-input" style="margin-top: 0.5rem;">
                            </div>
                            <div class="stat-card red">
                                <div class="stat-title">Total Expenses</div>
                                <div class="stat-value" id="total-expenses">₹0</div>
                            </div>
                            <div class="stat-card green" id="remaining-card">
                                <div class="stat-title">Remaining Budget</div>
                                <div class="stat-value" id="remaining-budget">₹50,000</div>
                            </div>
                        </div>

                        <div class="form-grid md-2">
                            <div class="form-section">
                                <div class="form-section-header">Add New Expense</div>
                                <div class="form-section-content">
                                    <form id="expense-form">
                                        <div class="form-group">
                                            <label class="form-label">Amount</label>
                                            <div style="display: flex; gap: 0.5rem;">
                                                <input type="number" class="form-input" name="amount" style="flex: 1;" required min="0" step="10">
                                                <select class="form-select" name="currency" style="width: 80px;">
                                                    <option value="INR">INR</option>
                                                    <option value="USD">USD</option>
                                                    <option value="EUR">EUR</option>
                                                    <option value="GBP">GBP</option>
                                                    <option value="AED">AED</option>
                                                    <option value="SGD">SGD</option>
                                                </select>
                                            </div>
                                            <div id="conversion-display" style="font-size: 0.875rem; color: #6b7280; margin-top: 0.25rem;"></div>
                                        </div>
                                        <div class="form-grid md-2">
                                            <div class="form-group">
                                                <label class="form-label">Category</label>
                                                <select class="form-select" name="category">
                                                    <option value="food">Food</option>
                                                    <option value="transport">Transport</option>
                                                    <option value="accommodation">Accommodation</option>
                                                    <option value="shopping">Shopping</option>
                                                    <option value="sightseeing">Sightseeing</option>
                                                    <option value="other">Other</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Date</label>
                                                <input type="date" class="form-input" name="date" required>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Payment Method</label>
                                            <div class="radio-group">
                                                <div class="radio-item">
                                                    <input type="radio" name="paymentMethod" value="cash" id="cash">
                                                    <label for="cash">Cash</label>
                                                </div>
                                                <div class="radio-item">
                                                    <input type="radio" name="paymentMethod" value="upi" id="upi" checked>
                                                    <label for="upi">UPI</label>
                                                </div>
                                                <div class="radio-item">
                                                    <input type="radio" name="paymentMethod" value="card" id="card">
                                                    <label for="card">Card</label>
                                                </div>
                                                <div class="radio-item">
                                                    <input type="radio" name="paymentMethod" value="netbanking" id="netbanking">
                                                    <label for="netbanking">Net Banking</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Description</label>
                                            <input type="text" class="form-input" name="description">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Add Expense</button>
                                    </form>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="form-section-header">Currency Converter</div>
                                <div class="form-section-content">
                                    <div class="form-group">
                                        <label class="form-label">Base Currency</label>
                                        <select class="form-select" id="base-currency">
                                            <option value="INR">INR</option>
                                            <option value="USD">USD</option>
                                            <option value="EUR">EUR</option>
                                            <option value="GBP">GBP</option>
                                            <option value="AED">AED</option>
                                            <option value="SGD">SGD</option>
                                        </select>
                                    </div>
                                    <div class="currency-grid" id="currency-rates">
                                        <!-- Currency rates will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">Expense History</div>
                    <div class="form-section-content">
                        <div id="expense-list" class="item-list">
                            <p style="color: #6b7280;">No expenses recorded yet.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Connections Tab -->
            <div id="connections" class="tab-content">
                <div class="form-section">
                    <div class="form-section-header">Add New Connection</div>
                    <div class="form-section-content">
                        <form id="connection-form">
                            <div class="form-grid md-2">
                                <div class="form-group">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-input" name="name" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Location</label>
                                    <input type="text" class="form-input" name="location" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Contact</label>
                                    <input type="text" class="form-input" name="contact" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Type</label>
                                    <select class="form-select" name="type">
                                        <option value="guide">Guide</option>
                                        <option value="driver">Driver</option>
                                        <option value="host">Host</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notes</label>
                                <textarea class="form-textarea" name="notes"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Add Connection</button>
                        </form>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">Your Connections</div>
                    <div class="form-section-content">
                        <div id="connection-list" class="item-list">
                            <!-- Sample connections will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Language Tab -->
            <div id="language" class="tab-content">
                <div class="form-section">
                    <div class="form-section-header">Add New Phrase</div>
                    <div class="form-section-content">
                        <form id="phrase-form">
                            <div class="form-grid md-2">
                                <div class="form-group">
                                    <label class="form-label">English</label>
                                    <input type="text" class="form-input" name="english" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Local Language</label>
                                    <input type="text" class="form-input" name="local" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Pronunciation</label>
                                    <input type="text" class="form-input" name="pronunciation" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Category</label>
                                    <select class="form-select" name="category">
                                        <option value="greetings">Greetings</option>
                                        <option value="directions">Directions</option>
                                        <option value="food">Food</option>
                                        <option value="emergency">Emergency</option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Add Phrase</button>
                        </form>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-header">Phrase Book</div>
                    <div class="form-section-content">
                        <div id="phrase-list" class="item-list">
                            <!-- Sample phrases will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global state
        let state = {
            activeTab: 'itinerary',
            itineraries: [],
            expenses: [],
            connections: [],
            phrases: [],
            budget: 50000,
            baseCurrency: 'INR',
            currencyRates: {
                USD: 83.5,
                EUR: 89.2,
                GBP: 105.4,
                INR: 1,
                AED: 22.7,
                SGD: 61.8
            },
            autoReschedule: true
        };

        // Utility functions
        function formatCurrency(amount, currency) {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: currency,
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function convertCurrency(amount, from, to) {
            return amount * (state.currencyRates[to] || 1) / (state.currencyRates[from] || 1);
        }

        function generateId() {
            return Date.now().toString();
        }

        // Tab switching
        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;
                    
                    // Update active states
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    button.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                    
                    state.activeTab = targetTab;
                });
            });
        }

        // Itinerary functions
        function initItinerary() {
            const form = document.getElementById('itinerary-form');
            const autoRescheduleCheckbox = document.getElementById('auto-reschedule');
            
            form.addEventListener('submit', handleItinerarySubmit);
            autoRescheduleCheckbox.addEventListener('change', (e) => {
                state.autoReschedule = e.target.checked;
            });
        }

        function handleItinerarySubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            const newItinerary = {
                id: generateId(),
                destination: formData.get('destination'),
                startDate: formData.get('startDate'),
                endDate: formData.get('endDate'),
                activities: formData.get('activities'),
                travelMode: formData.get('travelMode'),
                status: 'planned'
            };

            if (state.autoReschedule) {
                checkAndReschedule(newItinerary);
            }

            state.itineraries.push(newItinerary);
            renderItineraries();
            e.target.reset();
        }

        function checkAndReschedule(newItinerary) {
            const conflicts = state.itineraries.filter(item => 
                item.id !== newItinerary.id && 
                item.status === 'planned' &&
                ((new Date(newItinerary.startDate) <= new Date(item.endDate) && 
                  new Date(newItinerary.endDate) >= new Date(item.startDate))
                )
            );

            if (conflicts.length > 0) {
                conflicts.forEach(conflict => {
                    const item = state.itineraries.find(i => i.id === conflict.id);
                    if (item) {
                        const newStartDate = new Date(item.startDate);
                        newStartDate.setDate(newStartDate.getDate() + 1);
                        const newEndDate = new Date(item.endDate);
                        newEndDate.setDate(newEndDate.getDate() + 1);
                        
                        item.startDate = newStartDate.toISOString().split('T')[0];
                        item.endDate = newEndDate.toISOString().split('T')[0];
                        item.status = 'rescheduled';
                    }
                });

                alert(`${conflicts.length} itinerary(s) automatically rescheduled to avoid conflicts`);
            }
        }

        function renderItineraries() {
            const container = document.getElementById('itinerary-list');
            
            if (state.itineraries.length === 0) {
                container.innerHTML = '<p style="color: #6b7280;">No itineraries added yet.</p>';
                return;
            }

            container.innerHTML = state.itineraries.map(itinerary => `
                <div class="item-card ${itinerary.status === 'rescheduled' ? 'rescheduled' : ''}">
                    <div class="item-header">
                        <div>
